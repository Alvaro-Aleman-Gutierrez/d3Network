<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>D3network by christophergandrud</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>D3network</h1>
        <p>Tools for creating D3 JavaScript directed network graphs from R.</p>

        <p class="view"><a href="https://github.com/christophergandrud/d3Network">View the Project on GitHub <small>christophergandrud/d3Network</small></a></p>


        <ul>
          <li><a href="https://github.com/christophergandrud/d3Network/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/christophergandrud/d3Network/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/christophergandrud/d3Network">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="d3network" class="anchor" href="#d3network"><span class="octicon octicon-link"></span></a>d3Network</h1>

<h3>
<a name="christopher-gandrud" class="anchor" href="#christopher-gandrud"><span class="octicon octicon-link"></span></a><a href="http://christophergandrud.blogspot.com/p/biocontact.html">Christopher Gandrud</a>
</h3>

<p>Tools for creating D3 JavaScript directed network graphs from R.</p>

<p>This package is in very early beta (but the functions work nicely).</p>

<hr><p>This this package contains two key functions that allow you to make interactive directed network graphs in JavaScript with <a href="http://d3js.org/">D3</a> from R with data stored in data frames:</p>

<ul>
<li><p><code>d3SimpleNetwork</code>: a limited function that makes it easy to create simple network graphs. To make it very simple, customisability is very limited. See <a href="http://christophergandrud.blogspot.kr/2013/06/quick-and-simple-d3-network-graphs-from.html">this post</a> for details on how to use it.</p></li>
<li><p><code>d3Network</code>: this is the main function in the package. It gives you greater control in how you customise your graph (capabilities will be added over time). It also allows you to include the graph in <a href="http://slidify.org/">Slidify</a> produced or many other HTML slideshows as an iframe.</p></li>
</ul><hr><h2>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h2>

<p>Click the image to see a working example:</p>

  <script src="http://d3js.org/d3.v2.js?2.9.1"></script> 
  <style> 
  
  .link {  
  stroke: #666;
  opacity: 0.6;
  stroke-width: 1.5px; 
  } 
  
  .node circle { 
  stroke: #fff; 
  opacity: 0.6;
  stroke-width: 1.5px; 
  } 
  
  text { 
  font: 7px serif; 
  pointer-events: none; 
  } 
  
  </style> 
  
  <script> 
  var links = [ { "source" : "A", "target" : "B" }, { "source" : "A", "target" : "C" }, { "source" : "A", "target" : "D" }, { "source" : "A", "target" : "J" }, { "source" : "B", "target" : "E" }, { "source" : "B", "target" : "F" }, { "source" : "C", "target" : "G" }, { "source" : "C", "target" : "H" }, { "source" : "D", "target" : "I" } ] ; 
 var width = 700 
 height = 300 ; 
 
  var nodes = {}
  
  // Compute the distinct nodes from the links.
  links.forEach(function(link) {
  link.source = nodes[link.source] || 
  (nodes[link.source] = {name: link.source});
  link.target = nodes[link.target] || 
  (nodes[link.target] = {name: link.target});
  link.value = +link.value;
  });
  
  var color = d3.scale.category20();
  
  var force = d3.layout.force() 
  .nodes(d3.values(nodes)) 
  .links(links) 
  .size([width, height]) 
  .linkDistance(80) 
  .charge(-400) 
  .on("tick", tick) 
  .start(); 
  
  var svg = d3.select("body").append("svg") 
  .attr("width", width) 
  .attr("height", height); 
  
  var link = svg.selectAll(".link") 
  .data(force.links()) 
  .enter().append("line") 
  .attr("class", "link"); 
  
  var node = svg.selectAll(".node") 
  .data(force.nodes()) 
  .enter().append("g") 
  .attr("class", "node") 
  .on("mouseover", mouseover) 
  .on("mouseout", mouseout) 
  .on("click", click)
  .on("dblclick", dblclick)
  .call(force.drag); 
  
  node.append("circle") 
  .attr("r", 8)
  .style("fill", function(d) { return color(d.value); });
  
  node.append("text") 
  .attr("x", 12) 
  .attr("dy", ".35em") 
  .style("fill", "steelblue")
  .text(function(d) { return d.name; }); 
  
  function tick() { 
  link 
  .attr("x1", function(d) { return d.source.x; }) 
  .attr("y1", function(d) { return d.source.y; }) 
  .attr("x2", function(d) { return d.target.x; }) 
  .attr("y2", function(d) { return d.target.y; }); 
  
  node 
  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; }); 
  } 
  
  function mouseover() { 
  d3.select(this).select("circle").transition() 
  .duration(750) 
  .attr("r", 16); 
  } 
  
  function mouseout() { 
  d3.select(this).select("circle").transition() 
  .duration(750) 
  .attr("r", 8); 
  } 
  // action to take on mouse click
  function click() {
  d3.select(this).select("text").transition()
  .duration(750)
  .attr("x", 22)
.style("stroke-width", ".5px")
.style("fill", "#E34A33")
.style("font", "20px serif");
d3.select(this).select("circle").transition()
.duration(750)
.style("fill", "#E34A33")
.attr("r", 16)
}

// action to take on mouse double click
function dblclick() {
d3.select(this).select("circle").transition()
.duration(750)
.attr("r", 6)
.style("fill", "#E34A33");
d3.select(this).select("text").transition()
.duration(750)
.attr("x", 12)
.style("stroke", "none")
.style("fill", "#E34A33")
.style("stroke", "none")
.style("font", "10px serif");
}

<p><a href="http://dl.dropboxusercontent.com/u/12581470/Presentations/OddsAndEnds/NetworkD3.html"><img border="0" src="http://1.bp.blogspot.com/-gFxgVvzBSr8/UbPgDW-7fnI/AAAAAAAAGiE/an2RbjOC-68/s320/NetworkD3.png"></a></p>

<p>This is the code to create the graph:</p>

<div class="highlight"><pre><span class="c"># Create fake data</span>
<span class="c">Source &lt;- c("A", "A", "A", "A", "B", "B", "C", "C", "D")</span>
<span class="c">Target &lt;- c("B", "C", "D", "J", "E", "F", "G", "H", "I")</span>
<span class="c">NetworkData &lt;- data.frame(Source, Target)</span>

<span class="c"># Make network graph </span>
<span class="c">d3Network(NetworkDatad3, height = 300, width = 700)</span>
</pre></div>

<hr><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>You can install <em>d3Network</em> using the <a href="https://github.com/hadley/devtools">devtools</a> package and the following code:</p>

<div class="highlight"><pre><span class="c">devtools::install_github("d3Network", "christophergandrud")</span>
</pre></div>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/christophergandrud">christophergandrud</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-41657792-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
